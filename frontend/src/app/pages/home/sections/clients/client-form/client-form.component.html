<div class="p-4">
  <!-- Título dinâmico -->
  <h6>{{ data ? 'Edit Client' : 'Create Client' }}</h6>
  <hr>

  <!-- Formulário -->
  <form [formGroup]="form" (ngSubmit)="saveData()">
    <div class="mb-3">
      <label for="name" class="form-label">Name</label>
      <input id="name" formControlName="name" type="text" class="form-control" />
      <div *ngIf="form.get('name')?.invalid && form.get('name')?.touched" class="text-danger">
        Name is required.
      </div>
    </div>

    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input id="email" formControlName="email" type="email" class="form-control" />
      <div *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="text-danger">
        Valid email is required.
      </div>
    </div>

    <div class="mb-3 d-flex gap-3">
      <label for="status" class="form-label w-100">Status
        <select id="status" formControlName="status" class="form-select">
          <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
        </select>
        <div *ngIf="form.get('status')?.invalid && form.get('status')?.touched" class="text-danger">
          Status is required.
        </div>
      </label>

      <label for="number" class="form-label w-100">Number
        <input id="number" formControlName="number" type="text" class="form-control" />
        <div *ngIf="form.get('number')?.invalid && form.get('number')?.touched" class="text-danger">
          Phone number is required.
        </div>
      </label>
    </div>

    <div class="mb-3">
      <label for="tags" class="form-label">Tags</label>
      <div formArrayName="tags">
        <div *ngFor="let tag of tags.controls; let i = index">
          <input [formControlName]="i" type="text" class="form-control" [placeholder]="'Tag ' + (i + 1)" />
          <button type="button" (click)="removeTag(i)" class="btn btn-danger btn-sm">Remove</button>
        </div>
      </div>
      <button type="button" class="btn btn-primary btn-sm" (click)="addTag('')">Add Tag</button>
    </div>

    <!-- Delete or Save -->
    <div class="d-flex">
      <div class="d-flex align-items-center">
        <span *ngIf="!showDeleteConfirm && data" type="button" (click)="showDeleteConfirmation()">Delete Client</span>

        <!-- Confirmação de deleção -->
        <div *ngIf="showDeleteConfirm">
          <p class="text-danger">Are you sure you want to delete this client?</p>
          <span class="d-flex gap-2">
            <button type="button" class="btn btn-danger" (click)="confirmDelete()">Yes, Delete</button>
            <button type="button" class="btn btn-secondary" (click)="cancelDelete()">Cancel</button>
          </span>
        </div>
      </div>

        <button *ngIf="!showDeleteConfirm" type="submit" class="btn btn-dark ms-auto" [disabled]="form.invalid">Save</button>
    </div>
  </form>
</div>
